/**************************************************************************
 *	bluefire-os
 *	Version: 00.00.00
 *	Author: David Davidson
 *	Name: i386.h
 *	Created: Jan 11, 2012
 *	Last Update: Jan 11, 2012
 *	Purpose: Describes the only supported architecture, 386 class 32 bit.
 *  Usage:
***************************************************************************/

#ifndef I386_H_
#define I386_H_

//! Interrupt control: save flags and disable irqs.
#define local_irq_save(flags) \
	__asm__ __volatile__ ("pushfl ; popl %0 ; cli" : "=g"(flags) : : "memory")

//! Interrupt control: restore flags.
#define local_irq_restore(flags)	restore_flags(flags)

#define restore_flags( flags ) \
	__asm__ __volatile__ ("pushl %0 ; popfl" : : "g"(flags) : "memory", "cc")


#endif /* I386_H_ */
