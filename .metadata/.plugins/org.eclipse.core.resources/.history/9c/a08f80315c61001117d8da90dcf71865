/**************************************************************************
 *	bluefire-os
 *	Version: 00.00.00
 *	Author: David Davidson
 *	Name: floppy.c
 *	Created: Feb 27, 2012
 *	Purpose:
 *  Usage:
***************************************************************************/
#include <common_include.h>


// Initialize the floppy driver
void initialize_floppy() {
	s32int v;

	// Create the FDC buffer
	fdc_buffer = (u08int *)PHYSICAL(dma_pop_frame()*PAGE_SIZE);

	// Reset the controller
	fdc_reset();

	// Get floppy controller version //
	fdc_sendbyte(CMD_VERSION);
	v = fdc_getbyte();

	if (v==0x90)
		printf("Enhanced");
	else
		printf("8272A/765A");
}
