/**************************************************************************
 *	bluefire-os
 *	Version: 00.00.04
 *	Author: David Davidson
 *	Name: main.c
 *	Created: Dec 7, 2011
 *	Purpose:
 *  Usage:
***************************************************************************/
#include <common_include.h>

// Declared in assembly/test.s
//extern void infinity();

// function is called by address. static __inline__ calls will move the function down breaking things.
void k_main(u32int system_memory_amount) {

	initialize_video();

	initialize_boot_console();

	// Print the welcome banner
	set_color(DEFAULT_COLOR);
	kprintf("Welcome To ");
	set_color(LIGHT_BLUE);
	kprintf("Blue Fire OS.\n");
	set_color(DEFAULT_COLOR);
	kprintf("Kernel is running at virtual address: %#010x\n", (u32int)&k_main );
	kprintf("Total System memory is: %d MB\n", (system_memory_amount /(1024 * 1024)) );

	kprintf("Sizeof 1: %#010x\n", sizeof(long) );//4
	kprintf("Sizeof 2: %#010x\n", sizeof(long long) );
	kprintf("Sizeof 3: %#010x\n", sizeof(signed long) );
	kprintf("Sizeof 4: %#010x\n", sizeof(unsigned long) );
	kprintf("Sizeof 5: %#010x\n", sizeof(void *) );
	kprintf("Sizeof 6: %#010x\n", sizeof(long long) );

	dbg_brk();
}
